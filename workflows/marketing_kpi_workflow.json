{"name": "Marketing KPI Consolidation", "nodes": [{"parameters": {"cronExpression": "0 6 * * *"}, "name": "Daily Trigger", "type": "n8n-nodes-base.cron", "typeVersion": 1, "position": [100, 300]}, {"parameters": {"resource": "ad", "operation": "getCampaigns", "dateRange": "yesterday"}, "name": "Meta Ads", "type": "n8n-nodes-base.metaAds", "typeVersion": 1, "position": [300, 200]}, {"parameters": {"resource": "campaign", "operation": "get", "dateRange": "yesterday"}, "name": "Google Ads", "type": "n8n-nodes-base.googleAds", "typeVersion": 1, "position": [300, 400]}, {"parameters": {"viewId": "UA-XXXX-Y", "metrics": "sessions,conversionRate,purchases", "dimensions": "sourceMedium", "dateRange": "yesterday"}, "name": "GA4", "type": "n8n-nodes-base.googleAnalytics4", "typeVersion": 1, "position": [500, 300]}, {"parameters": {"url": "https://api.fakecrm.com/leads", "method": "GET", "queryParameters": [{"name": "date", "value": "yesterday"}]}, "name": "CRM HTTP", "type": "n8n-nodes-base.httpRequest", "typeVersion": 1, "position": [700, 300]}, {"parameters": {"functionCode": "return items;"}, "name": "Normalize & Merge", "type": "n8n-nodes-base.function", "typeVersion": 1, "position": [900, 300]}, {"parameters": {"values": {"string": [{"name": "Date", "value": "={{$now.toISO()}}"}, {"name": "Workflow_ID", "value": "kpi-consolidation-v1"}, {"name": "KPI_Version", "value": "1.0"}], "number": [{"name": "CAC", "value": "={{$json.Spend / $json.Purchases}}"}, {"name": "ROAS", "value": "={{$json.Revenue / $json.Spend}}"}, {"name": "CPC", "value": "={{$json.Spend / $json.Clicks}}"}]}}, "name": "Calculate KPIs", "type": "n8n-nodes-base.set", "typeVersion": 1, "position": [1100, 300]}, {"parameters": {"values": {"string": [{"name": "Score", "value": "{{(() => { const roas = $json.ROAS; const cac = $json.CAC; if (roas > 3 && cac < 20) return '\ud83d\udfe2 Excelente'; if (roas > 1.5 && cac < 40) return '\ud83d\udfe1 Aceptable'; return '\ud83d\udd34 Cr\u00edtico'; })()}}"}]}}, "name": "Score Diario", "type": "n8n-nodes-base.set", "typeVersion": 1, "position": [1300, 300]}, {"parameters": {"authentication": "oAuth2", "sheetId": "1x_fake_sheet_id_x", "range": "SSOT!A1", "valueInputMode": "USER_ENTERED"}, "name": "Append to Google Sheet", "type": "n8n-nodes-base.googleSheets", "typeVersion": 1, "position": [1500, 300]}], "connections": {"Daily Trigger": {"main": [["Meta Ads"], ["Google Ads"]]}, "Meta Ads": {"main": [["GA4"]]}, "Google Ads": {"main": [["GA4"]]}, "GA4": {"main": [["CRM HTTP"]]}, "CRM HTTP": {"main": [["Normalize & Merge"]]}, "Normalize & Merge": {"main": [["Calculate KPIs"]]}, "Calculate KPIs": {"main": [["Score Diario"]]}, "Score Diario": {"main": [["Append to Google Sheet"]]}}}